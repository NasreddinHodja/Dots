#!/usr/bin/env bash

WP_DIR="$HOME/Pictures/wp/"

marked=("$WP_DIR")

while true; do
    readarray -t marked < <(nsxiv -r -t -g -0 -o "${marked[@]}" | tr '\0' '\n')

    [[ "${#marked[@]}" -eq 0 ]] && exit 0;
    [[ "${#marked[@]}" -le 1 ]] && break;
done

[[ "${#marked[@]}" -eq 1 ]] && {
    $HOME/.local/bin/setbg "${marked[0]}"
}
