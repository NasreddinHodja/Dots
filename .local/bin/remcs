#!/usr/bin/env bash

TRID="666666"
PRID="777777"

TITLE="Restarting Emacs"
INIT_MSG=""
DAEMON_MSG="$INIT_MSG""Daemon restarted successfully\n"
DAEMON_ERR_MSG="$INIT_MSG""[ERROR] Failed to restart daemon\n"
SUCCESS_MSG="$DAEMON_MSG""Main frame opened successfully\n"
FAILURE_MSG="$INIT_MSG""[ERROR] Failed to open Main frame\n"

notify-send "$TITLE" "$INIT_MSG" --icon=emacs --hint=int:value:"0%" --replace-id=$TRID

if systemctl --user restart emacs; then
    notify-send "$TITLE" "$DAEMON_MSG" --hint=int:value:"50%" --icon=emacs --replace-id=$TRID

    if main-emacsclient; then
        notify-send "$TITLE" "$SUCCESS_MSG" --hint=int:value:"100%" --icon=emacs --replace-id=$TRID
    else
        notify-send "$TITLE" "$FAILURE_MSG" --hint=int:value:"50%" --icon=dialog-error --urgency=critical
    fi
else
    notify-send "$TITLE" "$DAEMON_ERR_MSG" --icon=dialog-error --hint=int:value:"0%" --urgency=critical --replace-id=$TRID
fi
