#!/bin/bash


count=0
until emacsclient -e '(emacs-pid)' >/dev/null 2>&1; do
    (( count++ > 500 )) && exit 1
    sleep 0.1
done

frame_params="((width . 120) (height . 45) (left . 2269) (top . 0) (fullscreen . fullheight))"

if [ -n "$*" ]; then
    /usr/bin/emacsclient --alternate-editor= --display="$DISPLAY" --frame-parameters="$frame_params" "$@" &
else
    /usr/bin/emacsclient --alternate-editor= --create-frame --display="$DISPLAY" --frame-parameters="$frame_params" &
fi

count=0
until xdotool search --class Emacs >/dev/null 2>&1; do
    (( count++ > 500 )) && exit 1
    sleep 0.1
done

wmctrl -x -r emacs.Emacs -t 0
# center-window
